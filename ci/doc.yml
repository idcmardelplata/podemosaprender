doc:
  stage: doc
  image: elixir:1.10.4-alpine
  cache:
    key: ${CI_COMMIT_REF_SLUG}
    paths:
      - _build
      - deps
      - doc

  artifacts:
    paths:
      - doc

  script:
    - mix local.hex --force
    - mix local.rebar --force
    - mix docs

  only:
    - merge_request
